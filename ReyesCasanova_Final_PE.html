<!-- 
    Name: Michael Reyes-Casanova
    Date: 9/27/23
    Assignment: Final Practical Exam
 -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Exam PE</title>
    <style>
        div {
            margin: 1rem auto;
        }
    </style>
</head>

<body>
    <header>
        <h1>Michael Reyes-Casanova, Trip Stats Calculator</h1>
    </header>
    <form>
        <div>
            <label for="tripName">Trip Name:</label>
            <input type="text" id="tripName">
        </div>
        <div>
            <label for="startMiles">Starting Mileage:</label>
            <input type="text" id="startMiles">
        </div>
        <div>
            <label for="endMiles">Ending Mileage:</label>
            <input type="text" id="endMiles">
        </div>
        <div>
            <label for="gas">Gallons of Gas Used:</label>
            <input type="text" id="gas">
        </div>
        <div>
            <input type="button" value="Get Trip Summary" onclick="openWindow()">
        </div>
    </form>

    <script>

        function processInfo() {
            let tripSummary = {};

            let tripName = document.getElementById("tripName").value;
            let startMiles = Number(document.getElementById("startMiles").value);
            let endMiles = Number(document.getElementById("endMiles").value);
            let totalTravel = Number(endMiles - startMiles);
            let gas = Number(document.getElementById("gas").value);

            tripSummary.name = tripName;
            tripSummary.travel = totalTravel;
            tripSummary.gas = gas;
            tripSummary.economy = totalTravel / gas;

            for (let key in tripSummary) {
                localStorage.setItem(key, tripSummary[key]);
            }

            let name = localStorage.getItem("name");
            console.log(name);

        }


        function openWindow() {

            let propertyWidth = 600;
            let propertyHeight = 600;
            let winLeft = ((screen.width - propertyWidth) / 2);
            let winTop = ((screen.height - propertyHeight) / 2);
            let winOptions = "width=600,height=600";
            winOptions += ",left=" + winLeft;
            winOptions += ",top=" + winTop;

            localStorage.clear();
            processInfo();
            window.open("/tripSummary.html", "_blank", winOptions);
            

        }
    </script>
</body>

</html>